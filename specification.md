# 受注・出荷管理システム 仕様書

## 1. システム概要

受注データの取り込みから出荷指示までを一元管理するWebベースのシステム。
Excelファイルによる受注データの一括登録と、受注情報の一覧表示・出荷指示を行う。

## 2. 機能要件

### 2.1 受注データアップロード機能

#### 2.1.1 画面構成
- ファイル選択エリア（ドラッグ&ドロップ対応）
- アップロードボタン
- アップロード結果表示エリア（成功件数、エラー件数、エラー詳細）

#### 2.1.2 対応ファイル形式
- Excel形式（.xlsx, .xls）

#### 2.1.3 想定データ項目
- 受注番号
- 受注日
- 顧客名
- 顧客コード
- 商品コード
- 商品名
- 数量
- 単価
- 金額
- 納期
- 配送先住所
- 配送先電話番号
- 備考

#### 2.1.4 処理内容
1. Excelファイルの読み込み
2. データバリデーション
   - 必須項目チェック
   - データ型チェック
   - 重複チェック（受注番号）
3. データベースへの登録
4. 処理結果の表示

#### 2.1.5 エラー処理
- ファイル形式エラー
- 必須項目未入力エラー
- データ型不一致エラー
- 受注番号重複エラー
- エラー行番号と内容を明示

### 2.2 受注一覧・出荷指示機能

#### 2.2.1 画面構成
- 検索フィルタエリア
  - 受注日範囲
  - 顧客名
  - 受注番号
  - 出荷ステータス
- 受注一覧テーブル
  - ソート機能（各列）
  - ページネーション
- 出荷指示ボタン（一括・個別）

#### 2.2.2 表示項目
- 選択チェックボックス
- 受注番号
- 受注日
- 顧客名
- 商品名
- 数量
- 納期
- 出荷ステータス（未出荷/出荷済）
- 出荷日
- アクション（詳細表示、出荷指示）

#### 2.2.3 出荷ステータス
- **未出荷**: 受注登録済み、出荷指示未実施
- **出荷済**: 出荷指示完了

#### 2.2.4 出荷指示機能
1. 一覧から対象受注を選択
2. 出荷指示ボタンクリック
3. 確認ダイアログ表示
4. ステータス更新（未出荷 → 出荷済）
5. 出荷日を記録

#### 2.2.5 検索・フィルタ機能
- 受注日範囲指定
- 顧客名部分一致検索
- 受注番号完全一致検索
- 出荷ステータスフィルタ

## 3. 非機能要件

### 3.1 性能要件
- 一度に1000件程度の受注データを処理可能
- 一覧画面の初期表示は3秒以内

### 3.2 セキュリティ要件
- ユーザー認証機能（将来拡張）
- アップロードファイルのウイルスチェック（推奨）
- SQLインジェクション対策

### 3.3 可用性要件
- システムエラー時のログ記録
- データベースバックアップ（日次）

### 3.4 ユーザビリティ要件
- レスポンシブデザイン（PC、タブレット対応）
- 直感的な操作性
- エラーメッセージは日本語で明確に表示

## 4. データベース設計（概要）

### 4.1 受注テーブル（orders）
| カラム名 | データ型 | 制約 | 説明 |
|---------|---------|------|------|
| id | INT | PRIMARY KEY, AUTO_INCREMENT | ID |
| order_number | VARCHAR(50) | UNIQUE, NOT NULL | 受注番号 |
| order_date | DATE | NOT NULL | 受注日 |
| customer_code | VARCHAR(20) | | 顧客コード |
| customer_name | VARCHAR(100) | NOT NULL | 顧客名 |
| product_code | VARCHAR(20) | | 商品コード |
| product_name | VARCHAR(200) | NOT NULL | 商品名 |
| quantity | INT | NOT NULL | 数量 |
| unit_price | DECIMAL(10,2) | | 単価 |
| amount | DECIMAL(10,2) | | 金額 |
| delivery_date | DATE | | 納期 |
| delivery_address | TEXT | | 配送先住所 |
| delivery_phone | VARCHAR(20) | | 配送先電話番号 |
| shipping_status | ENUM | DEFAULT '未出荷' | 出荷ステータス |
| shipping_date | DATE | | 出荷日 |
| remarks | TEXT | | 備考 |
| created_at | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 登録日時 |
| updated_at | TIMESTAMP | ON UPDATE CURRENT_TIMESTAMP | 更新日時 |

## 5. 技術スタック（推奨）

### 5.1 フロントエンド
- HTML5 / CSS3
- JavaScript（またはTypeScript）
- フレームワーク: React / Vue.js / Vanilla JS

### 5.2 バックエンド
- Node.js + Express
- または Python + Flask/Django
- または PHP + Laravel

### 5.3 データベース
- MySQL / PostgreSQL

### 5.4 ライブラリ
- Excel読み込み: SheetJS (xlsx)
- UI: Bootstrap / Tailwind CSS

## 6. 画面遷移図

```
[受注データアップロード画面]
         ↓
    アップロード実行
         ↓
    処理結果表示
         ↓
[受注一覧画面へ遷移]
         ↓
[受注一覧・出荷指示画面]
    - 検索/フィルタ
    - 一覧表示
    - 出荷指示実行
```

## 7. 今後の拡張候補

- ユーザー管理機能（ログイン・権限管理）
- 出荷指示のExcelエクスポート
- 在庫管理機能との連携
- 帳票出力機能（納品書、送り状）
- メール通知機能
- API連携（他システムとのデータ連携）
- ダッシュボード機能（受注統計、売上分析）

## 8. 開発スケジュール（目安）

1. 環境構築・DB設計: 1-2日
2. 受注アップロード機能: 3-4日
3. 受注一覧・出荷指示機能: 3-4日
4. テスト・デバッグ: 2-3日
5. リリース準備: 1日

**合計**: 約2-3週間

## 9. 補足事項

- 本仕様書は基本機能のみを記載
- 実装前に詳細要件の確認が必要
- Excelフォーマットのサンプルファイル作成を推奨
- テストデータの準備が必要
